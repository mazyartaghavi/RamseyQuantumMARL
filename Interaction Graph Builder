import networkx as nx


class InteractionGraph:

    def __init__(self, positions, threshold=1.5):
        self.positions = positions
        self.threshold = threshold

    def build_graph(self):
        G = nx.Graph()
        N = len(self.positions)

        for i in range(N):
            G.add_node(i)

        for i in range(N):
            for j in range(i + 1, N):
                dist = ((self.positions[i] - self.positions[j]) ** 2).sum() ** 0.5
                if dist < self.threshold:
                    G.add_edge(i, j)

        return G
