import networkx as nx


def count_k_cliques(graph, k=3):
    cliques = list(nx.enumerate_all_cliques(graph))
    return sum(1 for c in cliques if len(c) == k)


def clique_density(graph, k=3):
    N = graph.number_of_nodes()
    if N < k:
        return 0.0
    max_possible = 1
    for i in range(k):
        max_possible *= (N - i) / (i + 1)
    return count_k_cliques(graph, k) / max_possible
